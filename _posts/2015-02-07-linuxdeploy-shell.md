---
layout: post
title: Managing Linux Deploy from the command line
date: 2015-02-07 12:00:00 +0000
categories: [android, linuxdeploy]
comments: true
---

Помимо графического интерфейса Linux Deploy позволяет управлять экземпляром GNU/Linux системы из командной строки через эмулятор терминала Android. Для данных целей служит специальный сценарий **linuxdeploy**, который может запускаться из командной строки Android и принимает следующие параметры:

* **prepare** - подготовить контейнер, создать образ и файловую систему;
* **mount** - смонтировать контейнер;
* **umount** - размонтировать контейнер;
* **install** - запустить установку новой системы;
* **configure** - запустить переконфигурацию контейнера;
* **start** - запустить контейнер;
* **stop** - остановить контейнер;
* **shell** - выполнить chroot в контейнер;
* **status** - информация о системе.

<!--more-->

По умолчанию сценарий **linuxdeploy** находится в каталоге ENV_DIR/bin/linuxdeploy, где ENV_DIR - каталог рабочего окружения (по умолчанию /data/data/ru.meefik.linuxdeploy/linux), однако доступ к нему можно сделать более удобным (без указания полного пути к сценарию), если поместить символьную ссылку на этот сценарий в /system/bin. Для этого в настройках Linux Deploy есть опция Настройки -> Создать симлинк, после изменения параметра необходимо выполнить обновление окружения (Настройки -> Обновить окружение).

Все параметры, установленные через графический интерфейс Linux Deploy, хранятся в файле ENV_DIR/etc/deploy.conf. Их можно менять путем редактирования этого файла, однако следует учесть, что любые изменения параметров через графический интерфейс приведут к перезаписи файла и потере внесенных изменений. Переключение профилей также приводит к перезаписи конфигурационного файла. Однако оригинальный конфигурационный файл можно скопировать, например, на карту памяти, отредактировать его и указать этот файл в качестве параметра "-c FILE".

Команда **linuxdeploy shell**, наверное, наиболее полезна и нужна для доступа к командной строке установленного дистрибутива прямо из терминала Android. Эта команда также имеет необязательный параметр, принимающий команду, которую необходимо выполнить после перехода в chroot, по умолчанию запускается командный интерпретатор bash.

Примеры использования:
```sh
linuxdeploy shell date
linuxdeploy shell "uname -a"
linuxdeploy shell /bin/bash
```

