---
layout: post
title: Installing and configuring the RDP server
date: 2015-02-08 12:00:00 +0000
categories: [android, linuxdeploy]
comments: true
---

Linux Deploy в качестве графической подсистемы по умолчанию использует [VNC](https://en.wikipedia.org/wiki/Virtual_Network_Computing), как наиболее нативный сбособ организации удаленного доступа к рабочему столу GNU/Linux системы. Однако можно настроить удаленный доступ и по протоколу [RDP](https://en.wikipedia.org/wiki/Remote_Desktop_Protocol), используемый в операционных системах MS Windows. В примере используется дистрибутив Ubuntu 12.04 (Precise Pangolin), однако с небольшими изменениями это будет работать и в других дистрибутивах. В данном случае RDP будет работать поверх VNC-сервера, поэтому требуется чтобы он был установлен. В Linux Deploy VNC-сервер устанавливается по умолчанию.

<!--more-->

### Инструкция

* Запустить предварительно установленную GNU/Linux систему кнопкой СТАРТ из главного окна приложения.

* Подключиться к системе по SSH, VNC (IP-адрес для подключения указан в верхней строке главного окна приложения) или через Android-терминал (сценарий linuxdeploy shell).

* Открыть командную строку (терминал) системы и переключиться в режим суперпользователя:
```sh
sudo -s
```

* Установить пакет xrdp:
```sh
apt-get install xrdp
```

* Разрешить пользователю xrdp работать с сетью:
```sh
usermod -aG aid_inet xrdp
```

* Для автоматического запуска и остановки RDP-сервера через интерфейс Linux Deploy необходимо в параметрах разрешить сценарии пользователя (Параметры -> Сценарии пользователя) и в список сценариев добавить путь /etc/init.d/xrdp (Параметры -> Список сценариев).

* Перезапустить GNU/Linux систему кнопками СТОП/СТАРТ из главного окна приложения.

* Подключиться через RDP-клиент: module - sesman-Xvnc, username - android, password - changeme.

